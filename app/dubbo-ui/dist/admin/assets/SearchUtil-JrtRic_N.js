var O=Object.defineProperty;var R=(s,a,e)=>a in s?O(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e;var u=(s,a,e)=>(R(s,typeof a!="symbol"?a+"":a,e),e);import{d as H,g as Y,l as j,m as J,a as z,f as p,c as d,t as c,H as K,h as l,e as i,o as n,F as y,x as f,I as L,D as b,a0 as M,v as _,z as N,$ as E,_ as X,r as G}from"./index-tamXPwks.js";const Q={class:"__container_search_table"},W={class:"search-table-container"},Z={key:0},q=H({__name:"SearchTable",setup(s){const{appContext:{config:{globalProperties:a}}}=Y(),e=j(J.SEARCH_DOMAIN);e.table.columns.forEach(t=>{if(t.title){const m=t.title;t.title=z(()=>a.$t(m))}});const h=z(()=>(console.log(h),{pageSize:e.paged.pageSize,current:e.paged.curPage,showTotal:t=>a.$t("searchDomain.total")+": "+t+" "+a.$t("searchDomain.unit")})),g=(t,m,v)=>{e.paged.pageSize=t.pageSize,e.paged.curPage=t.current,e.onSearch()};return(t,m)=>{var C,F,k,T;const v=i("a-radio-button"),I=i("a-radio-group"),U=i("a-select-option"),w=i("a-select"),x=i("a-input"),S=i("a-form-item"),V=i("a-button"),A=i("a-flex"),B=i("a-form"),P=i("a-table");return n(),p("div",Q,[d(B,null,{default:c(()=>[d(A,{wrap:"wrap",gap:"large"},{default:c(()=>[(n(!0),p(y,null,f(l(e).params,o=>(n(),_(S,{label:t.$t(o.label)},{default:c(()=>[o.dict&&o.dict.length>0?(n(),p(y,{key:0},[o.dictType==="BUTTON"?(n(),_(I,{key:0,"button-style":"solid",value:l(e).queryForm[o.param],"onUpdate:value":r=>l(e).queryForm[o.param]=r},{default:c(()=>[(n(!0),p(y,null,f(o.dict,r=>(n(),_(v,{value:r.value},{default:c(()=>[N(b(t.$t(r.label)),1)]),_:2},1032,["value"]))),256))]),_:2},1032,["value","onUpdate:value"])):(n(),_(w,{key:1,class:"select-type",style:E(o.style),value:l(e).queryForm[o.param],"onUpdate:value":r=>l(e).queryForm[o.param]=r},{default:c(()=>[(n(!0),p(y,null,f([...o.dict,{label:"none",value:""}],r=>(n(),_(U,{value:r.value},{default:c(()=>[N(b(t.$t(r.label)),1)]),_:2},1032,["value"]))),256))]),_:2},1032,["style","value","onUpdate:value"]))],64)):(n(),_(x,{key:1,style:E(o.style),placeholder:t.$t("placeholder."+(o.placeholder||"typeDefault")),value:l(e).queryForm[o.param],"onUpdate:value":r=>l(e).queryForm[o.param]=r},null,8,["style","placeholder","value","onUpdate:value"]))]),_:2},1032,["label"]))),256)),d(S,{label:""},{default:c(()=>[d(V,{type:"primary",onClick:m[0]||(m[0]=o=>l(e).onSearch())},{default:c(()=>[d(l(L),{style:{"margin-bottom":"-2px","font-size":"1.3rem"},icon:"ic:outline-manage-search"})]),_:1})]),_:1})]),_:1})]),_:1}),K("div",W,[d(P,{loading:l(e).table.loading,pagination:h.value,scroll:{scrollToFirstRowOnChange:!0,y:((C=l(e).tableStyle)==null?void 0:C.scrollY)||"",x:((F=l(e).tableStyle)==null?void 0:F.scrollX)||""},columns:(k=l(e))==null?void 0:k.table.columns,"data-source":(T=l(e))==null?void 0:T.result,onChange:g},{bodyCell:c(({text:o,record:r,index:$,column:D})=>[D.key==="idx"?(n(),p("span",Z,b($+1),1)):M(t.$slots,"bodyCell",{key:1,text:o,record:r,index:$,column:D},void 0,!0)]),_:3},8,["loading","pagination","scroll","columns","data-source"])])])}}}),te=X(q,[["__scopeId","data-v-546fd966"]]);class oe{constructor(a,e,h,g){u(this,"queryForm");u(this,"params");u(this,"searchApi");u(this,"result");u(this,"tableStyle");u(this,"table",{columns:[]});u(this,"paged",{curPage:1,total:0,pageSize:10});this.params=a,this.queryForm=G({}),this.table.columns=h,a.forEach(t=>{t.defaultValue&&(this.queryForm[t.param]=t.defaultValue)}),g&&(this.paged={...this.paged,...g}),this.searchApi=e,this.onSearch()}async onSearch(){this.table.loading=!0,setTimeout(()=>{this.table.loading=!1},5e3);let a=(await this.searchApi(this.queryForm||{})).data;this.result=a.data,this.paged.total=a.total,this.table.loading=!1}}function le(s,a){return isNaN(s-a)?s.localeCompare(a):s-a}export{oe as S,te as a,le as s};
